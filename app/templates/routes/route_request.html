{% extends "base.html" %}
{% import "map.html" as map %}
{% import "datepicker.html" as dtpick %}

{% block imports %}
    {{ map.imports() }}
    {{ dtpick.imports() }}
{% endblock %}


{% block styles %}

    .full-height {
    height: 100%;
    }

    #mapid {
        height: 100%;
    }
{% endblock %}

{% block body %}
    <section class="section full-height">
        <div class="columns full-height">
            <div class="column is-half full-height" id="mapParent" >
                {{ map.map() }}
                <script>loadMarkersRoute({{ trip.departure_location_lat }}, {{ trip.departure_location_long }}, {{ trip.arrival_location_lat }}, {{ trip.arrival_location_long }})</script>
            </div>
            <form class="column" action="" method="POST" novalidate>
                <div class="tile is-vertical">
                    {{ form.hidden_tag() }}
                    <h1 class="title">{{ user.firstname }} wants to ride with you!</h1>
                    <div class="columns">
                        <div class="column">
                            <h2 class="subtitle">Trip information</h2>
                            <p> From: {{ trip.text_from() }}</p>
                            <p> To: {{ trip.text_to() }} </p>
                            <p> Time: {{ trip.departure_time }} </p><br><br>
                            {% if trip.playlist %}
                            <p>Here is the playlist that was added to the route.</p><br>
                            <iframe src="https://open.spotify.com/embed/playlist/{{ trip.playlist }}" width="80%" height="80%" frameborder="10" allowtransparency="true" allow="encrypted-media"></iframe>
                            {% elif range(0, 10) | random%}
                                <p>No playlist added to this route. </p>
                            <p>Here is some other music to cheer you up.</p><br>
                                <iframe src="https://open.spotify.com/embed/playlist/2MClsgoo2g1jaWfshyduRL?" uri="theme=white" width="80%" height="80%" frameborder="10" allowtransparency="true" allow="encrypted-media"></iframe>
                            {% else %}
                                <p>No playlist added to this route. </p>
                            <p>Here is some other music, hehep.</p><br>
                                <iframe src="https://open.spotify.com/embed/album/6N9PS4QXF1D0OWPk0Sxtb4" width="80%" height="80%" frameborder="10" allowtransparency="true" allow="encrypted-media"></iframe>
                            {% endif %}
                        </div>
                        <div class="column">
                            <h2 class="subtitle">User information</h2>
                            <figure class="image is-128x128">
                                <img class="is-rounded" src="{{ user.avatar(128) }}">
                            </figure>
                            <br>
                            <p> Name: {{ user.firstname }} {{ user.lastname }} </p>
                            <p> email: {{ user.email }} </p>
                        </div>
                    </div>
                    <br><br>
                    <div class="buttons">
                        {{ form.accept(class="button is-success") }}
                        {{ form.reject(class="button is-danger") }}
                    </div>
                </div>
            </form>
        </div>
    </section>
{% endblock %}